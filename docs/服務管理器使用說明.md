# DSE SQL 訓練營 - 服務管理器使用說明

## 📋 簡介

服務管理器是一個專為 Linux 系統設計的圖形化工具，用於管理和監控 DSE SQL 訓練營的後端服務。

## 🚀 啟動方式

### 方式一：命令行啟動

```bash
cd "/home/yivh/web surver"
python3 service-manager.py
```

或使用啟動腳本：

```bash
./start-service-manager.sh
```

### 方式二：桌面圖標啟動

1. 將 `dse-sql-service-manager.desktop` 文件複製到桌面或應用程序目錄：
   ```bash
   cp dse-sql-service-manager.desktop ~/Desktop/
   chmod +x ~/Desktop/dse-sql-service-manager.desktop
   ```

2. 雙擊桌面圖標即可啟動

## 🎯 主要功能

### 1. 服務控制

- **啟動服務**：點擊「▶ 啟動服務」按鈕啟動後端服務
- **停止服務**：點擊「■ 停止服務」按鈕停止運行中的服務
- **重啟服務**：點擊「↻ 重啟服務」按鈕重啟服務
- **健康檢查**：點擊「🔍 健康檢查」按鈕檢查服務狀態

### 2. 服務狀態監控

- 實時顯示服務運行狀態（運行中/已停止）
- 顯示進程 ID (PID)
- 顯示服務端口號（默認 5000）
- 自動檢測服務狀態變化

### 3. 實時日誌查看

- 顯示服務的實時日誌輸出
- 支持自動滾動
- 可以清空和刷新日誌
- 支持查看日誌文件

### 4. 快速訪問

提供快速訪問按鈕，一鍵打開：
- 首頁
- SQL 練習
- Python 中心
- 互動練習
- 學習進度
- 用戶中心

### 5. 配置管理

- **編輯配置**：打開配置編輯器，編輯 `config.py` 文件
  - 可以修改 API 密鑰
  - 自動備份原配置文件
  - 保存後需要重啟服務才能生效

- **查看日誌文件**：使用系統默認編輯器打開日誌文件

### 6. 系統信息

顯示：
- 工作目錄
- 服務端口
- 應用文件路徑
- 配置文件路徑
- 日誌文件路徑
- Python 環境信息

## 📝 使用步驟

### 首次使用

1. **啟動服務管理器**
   ```bash
   python3 service-manager.py
   ```

2. **檢查服務狀態**
   - 查看左側「服務狀態」區域
   - 如果顯示「○ 已停止」，點擊「▶ 啟動服務」

3. **等待服務啟動**
   - 服務啟動需要幾秒鐘時間
   - 查看日誌區域確認啟動成功

4. **驗證服務**
   - 點擊「🔍 健康檢查」按鈕
   - 或點擊「🌐 首頁」按鈕打開網頁

### 日常使用

1. **啟動服務**：點擊「▶ 啟動服務」
2. **使用網頁**：點擊快速訪問按鈕打開相應頁面
3. **查看日誌**：在日誌區域查看服務運行情況
4. **停止服務**：使用完畢後點擊「■ 停止服務」

### 配置 API 密鑰

1. 點擊「⚙️ 編輯配置」按鈕
2. 在配置編輯器中修改 API 密鑰：
   ```python
   ZHIPU_API_KEY = "your_api_key_here"
   SILICONFLOW_API_KEY = "your_api_key_here"
   ```
3. 點擊「保存」按鈕
4. 重啟服務使配置生效

## ⚙️ 技術細節

### 系統要求

- Python 3.6+
- Tkinter（通常隨 Python 一起安裝）
- Linux 系統

### 依賴檢查

如果遇到 Tkinter 未安裝的錯誤，請安裝：

```bash
# Ubuntu/Debian
sudo apt-get install python3-tk

# Fedora/RHEL
sudo dnf install python3-tkinter

# Arch Linux
sudo pacman -S tk
```

### 端口配置

默認端口為 5000。如果需要修改：

1. 編輯 `service-manager.py` 文件
2. 找到 `self.port = 5000` 這一行
3. 修改為您想要的端口號
4. 同時需要修改 `app.py` 中的端口配置

## 🔧 故障排除

### 問題：無法啟動服務

**解決方案：**
1. 檢查端口是否被占用
2. 查看日誌區域的錯誤信息
3. 確認 `app.py` 文件存在且可執行
4. 檢查 Python 環境和依賴包

### 問題：服務啟動後立即停止

**解決方案：**
1. 查看日誌區域的錯誤信息
2. 檢查 `config.py` 配置是否正確
3. 確認所有依賴包已安裝：
   ```bash
   pip3 install -r requirements.txt
   ```

### 問題：無法打開網頁

**解決方案：**
1. 確認服務正在運行（狀態顯示「● 運行中」）
2. 點擊「🔍 健康檢查」確認服務正常
3. 檢查防火牆設置
4. 嘗試手動訪問：http://localhost:5000

### 問題：GUI 界面無法顯示

**解決方案：**
1. 確認已安裝 Tkinter：
   ```bash
   python3 -m tkinter
   ```
2. 如果出現錯誤，安裝 Tkinter（見上方「依賴檢查」）

## 📌 注意事項

1. **關閉窗口**：關閉服務管理器窗口不會自動停止服務。如果需要停止服務，請先點擊「停止服務」按鈕。

2. **配置文件備份**：每次保存配置文件時，會自動創建備份文件（`.py.bak`）。

3. **日誌文件**：服務日誌保存在 `backend.log` 文件中，可以在服務管理器中查看，也可以直接打開文件查看。

4. **端口占用**：如果端口被占用，服務管理器會提示是否停止現有進程。

5. **權限問題**：如果遇到權限問題，確保腳本有執行權限：
   ```bash
   chmod +x service-manager.py
   chmod +x start-service-manager.sh
   ```

## 🎨 界面說明

### 左側控制面板
- **服務控制**：啟動、停止、重啟服務
- **快速訪問**：快速打開各個網頁
- **配置管理**：編輯配置和查看日誌

### 中間日誌區域
- 顯示服務的實時日誌
- 支持自動滾動
- 可以清空和刷新

### 右側信息面板
- 顯示系統信息和服務配置

## 📞 支持

如有問題，請查看：
- `故障排除.md` - 詳細故障排除指南
- `README_啟動指南.md` - 啟動說明
- `配置API密鑰說明.md` - API 配置說明

---

**祝您使用愉快！** 🚀

