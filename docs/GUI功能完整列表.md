# GUI 服務管理器 - 完整功能列表

## 📋 界面布局

GUI 分为三个主要区域：
- **左侧控制面板**：服务控制和快速操作
- **中间日志区域**：实时服务日志显示
- **右侧信息面板**：多个标签页显示不同信息

---

## 🎮 左侧控制面板功能

### 1. 服務控制区域

#### 服務狀態顯示
- **服務狀態**：实时显示运行状态（運行中/已停止）
- **進程 ID (PID)**：显示后端服务进程 ID
- **端口信息**：显示服务端口号（默认 5000）

#### 控制按鈕
- **▶ 啟動服務**：启动后端 Flask 服务
- **■ 停止服務**：停止运行中的服务
- **↻ 重啟服務**：重启服务（先停止再启动）
- **🔍 健康檢查**：检查服务健康状态，访问 `/health` 接口

---

### 2. 快速訪問区域

#### 訪問模式選擇
- **本地模式**：使用 `localhost:5000` 访问
- **公網模式**：使用配置的公网 IP/域名访问

#### 快速訪問按鈕（動態生成）
- **首頁** (`index.html`)
- **SQL 練習** (`practice.html`)
- **Python 中心** (`python-center.html`)
- **互動練習** (`interactive.html`)
- **學習進度** (`progress.html`)
- **用戶中心** (`user-system.html`)

---

### 3. NPM 管理区域

#### NPM 容器控制
- **▶ 啟動 NPM**：启动 NPM 容器（如果不存在则自动创建）
- **■ 停止 NPM**：停止 NPM 容器
- **↻ 重啟 NPM**：重启 NPM 容器

#### NPM 狀態顯示
- **狀態標籤**：实时显示容器状态
  - 運行中（绿色）
  - 已停止（红色）
  - 未創建（灰色）
  - 檢查失敗（红色）
- **刷新按鈕**：手动刷新容器状态

#### NPM 管理界面訪問
- **🌐 打開 NPM 管理界面**：在浏览器中打开 NPM 后台

#### NPM 地址配置
- **地址輸入框**：可编辑 NPM 管理地址（默认：`192.168.10.1:81`）
- **保存按鈕**：保存地址配置到 `npm_config.json`

---

### 4. 網域名稱配置区域

- **公網 IP/域名輸入框**：输入公网 IP 或域名
- **💾 保存網域名稱**：保存配置到 `domain_config.json`
- **自動加載**：启动时自动加载保存的配置

---

### 5. 公網訪問区域

- **🔍 診斷公網訪問**：诊断公网访问问题
  - 检查服务状态
  - 检查端口监听
  - 检查本地连接
  - 检查内网连接
  - 检查防火墙状态
  - 提供端口映射建议

- **🔧 配置防火牆**：生成防火墙配置脚本
  - 支持 UFW
  - 支持 firewalld
  - 提供手动配置指南

---

### 6. 配置管理区域

- **⚙️ 編輯配置**：打开配置编辑器
  - 编辑 `config.py` 文件
  - 自动备份原配置文件
  - 支持修改 API 密钥

- **📋 查看日誌文件**：使用系统默认编辑器打开日志文件

---

## 📊 中間日誌區域

### 服務日誌顯示

#### 日誌工具欄
- **清空日誌**：清空日志显示区域
- **刷新**：手动刷新日志内容
- **自動滾動**：复选框，启用/禁用自动滚动
- **↑ 頂部**：滚动到日志顶部
- **↓ 底部**：滚动到日志底部

#### 日誌顯示區域
- **實時日誌**：显示后端服务的实时日志输出
- **深色主題**：深色背景，浅色文字，便于阅读
- **滾輪支持**：支持鼠标滚轮滚动
- **優化間距**：优化的行间距和边距

---

## 📑 右側信息面板（標籤頁）

### 標籤頁 1：系統信息

顯示系統基本信息：
- 工作目錄
- 服務端口
- 應用文件路徑
- 配置文件路徑
- 日誌文件路徑
- Python 環境信息

---

### 標籤頁 2：系統資源監控

#### 系統概況
- **CPU 使用率**：进度条 + 百分比显示
- **記憶體使用**：进度条 + 已用/总量/百分比
- **磁碟空間**：已用/总量/百分比
- **CPU 溫度**：温度显示（带颜色标识）
  - 绿色：< 60°C
  - 橙色：60-80°C
  - 红色：> 80°C
- **本機 IP**：显示本地 IP 地址

#### 服務狀態
- **後端服務**：運行中/未運行（带颜色标识）
- **資料庫**：可用/不可用（带颜色标识）
- **用戶數量**：显示注册用户总数

#### 訪問次數趨勢圖
- **折線圖**：显示最近 24 小时的网站访问次数
- **Canvas 繪製**：实时绘制访问趋势
- **數據來源**：从后端 API 或日志文件获取

#### 詳細資訊
- **文字顯示**：显示所有系统资源的详细信息
- **實時更新**：每 2 秒自动刷新

---

### 標籤頁 3：公網訪問診斷

#### 診斷工具欄
- **刷新診斷**：重新执行诊断
- **清空**：清空诊断结果

#### 診斷結果顯示
診斷項目包括：
1. 服務狀態檢查
2. 端口監聽檢查
3. 本地連接測試
4. 內網連接測試
5. 防火牆狀態檢查
6. 端口映射配置建議
7. 公網連接測試（可選）

---

### 標籤頁 4：AI助手管理

#### 工具欄
- **刷新狀態**：刷新 AI 服务状态

#### AI 模型狀態顯示
- **智譜AI (GLM-4-Flash)**
  - 狀態：可用/不可用
  - API 密鑰配置狀態
  - 連接測試按鈕

- **SiliconFlow (DeepSeek/Qwen)**
  - 狀態：可用/不可用
  - API 密鑰配置狀態
  - 連接測試按鈕

#### API 密鑰管理
- **智譜AI API 密鑰**
  - 輸入框：显示/编辑 API 密钥
  - 保存按鈕：保存到 `config.py`

- **SiliconFlow API 密鑰**
  - 輸入框：显示/编辑 API 密钥
  - 保存按鈕：保存到 `config.py`

#### 模型測試
- **模型選擇下拉框**：选择要测试的 AI 模型
- **測試連接按鈕**：测试选中的模型连接
- **測試結果顯示**：显示测试结果

---

### 標籤頁 5：HTML文件管理

#### 文件列表
- **Treeview 樹形視圖**：显示所有 HTML 文件
  - 文件路径
  - 文件大小
  - 修改时间

#### 搜索功能
- **搜索輸入框**：按文件名搜索
- **搜索按鈕**：执行搜索
- **重置按鈕**：清除搜索条件

#### 文件操作按鈕
- **打開文件**：使用系统默认程序打开文件
- **編輯文件**：使用系统默认编辑器编辑文件
- **查看信息**：显示文件详细信息
  - 文件路径
  - 文件大小
  - 修改时间
  - 创建时间

---

### 標籤頁 6：資料庫與用戶

#### 資料庫資訊
- **路徑**：显示数据库文件路径
- **大小**：显示数据库文件大小（MB）
- **資料表**：列出所有数据表

#### 操作按鈕
- **刷新資料庫狀態**：刷新数据库信息
- **備份資料庫**：备份数据库到 `backups/` 目录
- **打開資料庫位置**：使用文件管理器打开数据库目录

#### 用戶列表（分頁 1）
- **Treeview 表格**：显示所有用户
  - ID
  - 用戶名
  - 電子郵件
  - 創建時間
  - 最後登入
  - 狀態（啟用/停用）

#### 用戶操作
- **鎖定/解鎖用戶**：切换选中用户的启用状态
- **刷新用戶列表**：刷新用户列表

#### 學習進度（分頁 2）
- **Treeview 表格**：显示所有用户的学习进度
  - ID
  - 用戶名
  - 完成題數（SQL 練習 + 互動練習）
  - 總分
  - 學習時長（分钟）
  - 等級

---

## 🔄 自動化功能

### 自動監控
- **服務狀態監控**：每 2 秒自动检查服务状态
- **系統資源監控**：每 2 秒自动更新系统资源信息
- **日誌實時更新**：实时显示服务日志输出
- **NPM 狀態檢查**：启动时自动检查 NPM 容器状态

### 自動加載
- **配置自動加載**：启动时自动加载保存的配置
  - 域名配置（`domain_config.json`）
  - NPM 地址配置（`npm_config.json`）

---

## 🛠️ 後台功能

### Docker 容器管理
- **自動檢測**：检测容器是否存在
- **自動創建**：容器不存在时自动创建（使用标准命令）
- **標準配置**：使用您提供的标准 Docker 运行命令

### 文件管理
- **自動備份**：编辑配置时自动备份原文件
- **路徑驗證**：验证文件路径和权限

### 數據庫操作
- **SQLite 連接**：自动连接和管理 SQLite 数据库
- **JSON 處理**：处理 JSON 格式的用户偏好数据
- **數據備份**：支持数据库备份功能

---

## 📈 數據可視化

### 系統資源監控
- **進度條**：CPU、内存使用率可视化
- **顏色標識**：温度、状态用颜色区分
- **實時更新**：每 2 秒刷新

### 訪問次數趨勢圖
- **折線圖**：Canvas 绘制的访问趋势图
- **數據點**：显示最近 24 小时的数据点
- **自動縮放**：根据数据自动调整图表比例

---

## 🔐 安全功能

### 配置保護
- **自動備份**：修改配置前自动备份
- **驗證機制**：验证配置格式和有效性

### 訪問控制
- **防火牆診斷**：检查防火墙配置
- **端口檢查**：检查端口监听状态

---

## 💾 數據持久化

### 配置文件
- **domain_config.json**：域名和 IP 配置
- **npm_config.json**：NPM 地址配置
- **config.py**：API 密钥配置（自动备份）

### 數據庫
- **database.db**：SQLite 数据库
  - 用户数据
  - 用户配置
  - 学习进度
  - 会话信息

---

## 🎨 用戶體驗優化

### 界面優化
- **深色日誌主題**：便于阅读的深色背景
- **優化間距**：优化的行间距和边距
- **滾輪支持**：完整的鼠标滚轮支持
- **自動滾動**：可选的自动滚动功能

### 操作反饋
- **狀態提示**：操作成功/失败的明确提示
- **顏色標識**：用颜色区分不同状态
- **日誌記錄**：所有操作记录到日志

### 錯誤處理
- **友好提示**：清晰的错误信息
- **異常捕獲**：完善的异常处理机制
- **超時處理**：操作超时保护

---

## 📊 功能統計

### 總功能數
- **控制按鈕**：15+ 个
- **信息標籤頁**：6 个
- **監控指標**：10+ 个
- **管理功能**：20+ 个

### 自動化功能
- **自動監控**：4 项
- **自動加載**：2 项
- **自動備份**：1 项

---

## 🎯 使用場景

### 日常管理
- 启动/停止后端服务
- 查看服务日志
- 监控系统资源
- 管理用户和数据库

### 配置管理
- 修改 API 密钥
- 配置域名和 IP
- 管理 NPM 容器
- 配置防火墙

### 故障排除
- 诊断公网访问问题
- 检查服务健康状态
- 查看详细日志
- 检查系统资源

### 數據分析
- 查看访问趋势
- 监控用户学习进度
- 分析系统资源使用
- 查看用户统计

---

## 📝 總結

GUI 服務管理器是一個功能完整的圖形化管理工具，提供了：

✅ **完整的服務控制**：啟動、停止、重啟、健康檢查
✅ **實時監控**：系統資源、服務狀態、訪問統計
✅ **便捷管理**：NPM 容器、數據庫、用戶、文件
✅ **智能診斷**：公網訪問診斷、防火牆配置
✅ **數據可視化**：訪問趨勢圖、資源監控圖表
✅ **用戶友好**：優化的界面、清晰的反饋、完善的錯誤處理

所有功能都集成在一個統一的 GUI 界面中，無需手動輸入命令，大大提升了管理效率！

